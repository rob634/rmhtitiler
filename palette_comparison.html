<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bivariate Palette Comparison – H3 Explorer</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    background: #111; color: #ccc;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    padding: 32px;
}
h1 { font-size: 22px; margin-bottom: 8px; color: #fff; }
p.subtitle { font-size: 13px; color: #888; margin-bottom: 32px; }
.palettes { display: flex; flex-wrap: wrap; gap: 36px; }
.palette-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 12px;
    padding: 20px;
    width: 320px;
}
.palette-card h2 { font-size: 15px; color: #fff; margin-bottom: 4px; }
.palette-card .desc { font-size: 11px; color: #888; margin-bottom: 14px; line-height: 1.5; }
.palette-card.current { border-color: rgba(255,255,255,0.25); }
.palette-card.current h2::after { content: ' (current)'; color: #666; font-weight: 400; }

.grid-container { display: flex; gap: 16px; align-items: flex-start; }
.bivariate-grid {
    display: grid;
    grid-template-columns: repeat(3, 56px);
    grid-template-rows: repeat(3, 56px);
    gap: 2px;
    border-radius: 6px;
    overflow: hidden;
}
.bivariate-grid .cell {
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; font-weight: 600; color: rgba(0,0,0,0.5);
    position: relative;
}
.bivariate-grid .cell.bright-text { color: rgba(255,255,255,0.7); }

.axis-labels { font-size: 9px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; }
.axis-labels .y-axis { writing-mode: vertical-lr; transform: rotate(180deg); height: 170px; display: flex; align-items: center; }
.axis-labels .x-axis { width: 170px; text-align: center; margin-top: 4px; }

.legend {
    display: flex; flex-direction: column; gap: 2px; font-size: 10px; color: #999; margin-top: 8px;
}
.legend .row { display: flex; align-items: center; gap: 6px; }
.legend .swatch { width: 14px; height: 14px; border-radius: 3px; flex-shrink: 0; }

/* Segmented ramps */
.ramp-section { margin-top: 14px; }
.ramp-section h3 { font-size: 11px; color: #aaa; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
.ramp-row { display: flex; gap: 2px; margin-bottom: 4px; }
.ramp-row .label { font-size: 10px; color: #777; width: 60px; flex-shrink: 0; line-height: 28px; }
.ramp-cell { width: 42px; height: 28px; border-radius: 3px; }
</style>
</head>
<body>

<h1>Bivariate Palette Comparison</h1>
<p class="subtitle">
    3×3 grid: X-axis = Production (Low → High), Y-axis = Drought Risk (Safe → At-Risk).<br>
    Goal: High Production + High Risk (top-right) should be the brightest, most attention-grabbing cell.
</p>

<div class="palettes" id="palettes"></div>

<script>
const palettes = [
    {
        name: 'Joshua Stevens (Original)',
        desc: 'Classic bivariate blend. High-prod/high-risk is a muted dark purple-brown. Doesn\'t pop.',
        current: true,
        // [row=drought][col=production]  row0=safe, row2=at-risk
        colors: [
            [[232,232,232], [176,213,223], [100,172,190]],
            [[228,172,172], [173,158,165], [98,127,140]],
            [[200,90,90],   [152,83,86],   [87,66,73]],
        ],
        safe:    [[255,255,212], [254,227,145], [254,196,79], [217,160,40], [153,107,15]],
        drought: [[254,210,200], [252,154,120], [239,83,80], [203,24,29], [128,0,13]],
    },
    {
        name: 'A – Fire Alert',
        desc: 'Teal production ramp meets red risk ramp. Danger corner is vivid hot magenta/red. Safe+low is near-white.',
        colors: [
            [[230,230,230], [166,218,208], [60,180,150]],
            [[240,170,160], [190,155,148], [100,130,110]],
            [[255,65,54],   [230,50,90],   [255,0,80]],
        ],
        safe:    [[240,248,240], [180,225,200], [100,200,155], [40,175,115], [0,140,80]],
        drought: [[255,210,200], [255,145,120], [255,70,60],   [230,20,40],  [180,0,30]],
    },
    {
        name: 'B – Neon Danger',
        desc: 'Cool blue-green for safe production. Bright orange-yellow for the danger corner. Maximum contrast.',
        colors: [
            [[235,235,235], [180,215,220], [80,180,195]],
            [[245,195,140], [200,175,145], [130,150,140]],
            [[255,140,0],   [255,100,30],  [255,200,0]],
        ],
        safe:    [[240,245,250], [185,220,230], [110,195,210], [50,170,190], [0,140,165]],
        drought: [[255,230,180], [255,190,100], [255,155,30],  [255,120,0],  [230,90,0]],
    },
    {
        name: 'C – Emergency Red',
        desc: 'Slate-blue production meets warm risk. Danger corner is saturated crimson red. Professional, clear hierarchy.',
        colors: [
            [[225,228,232], [170,190,210], [90,140,180]],
            [[230,180,175], [185,160,170], [120,125,150]],
            [[220,50,47],   [200,40,70],   [235,30,35]],
        ],
        safe:    [[230,235,245], [180,200,225], [120,160,200], [70,125,180], [30,90,155]],
        drought: [[250,210,200], [245,160,140], [235,100,85],  [220,50,40],  [180,20,20]],
    },
    {
        name: 'D – Violet Heat',
        desc: 'Green-teal for safe production. Risk escalates through pink to electric violet. Danger corner glows.',
        colors: [
            [[230,232,228], [175,215,195], [80,185,140]],
            [[225,180,210], [180,160,180], [105,135,140]],
            [[200,50,160],  [180,30,180],  [230,0,255]],
        ],
        safe:    [[235,245,235], [180,225,195], [110,200,150], [50,175,110], [10,145,75]],
        drought: [[240,200,230], [225,140,200], [210,80,175],  [195,30,155], [170,0,130]],
    },
    {
        name: 'E – Solar Flare',
        desc: 'Cool gray-blue base. Risk intensifies from peach to deep red. High production warms to gold. Danger corner is blazing orange-red.',
        colors: [
            [[228,232,238], [185,205,218], [120,170,195]],
            [[242,200,175], [210,178,168], [155,150,148]],
            [[240,80,40],   [245,110,50],  [255,160,0]],
        ],
        safe:    [[235,240,248], [190,210,230], [135,180,210], [85,150,190], [40,115,168]],
        drought: [[255,225,195], [255,180,120], [255,130,55],  [245,85,25],  [220,55,0]],
    },
    {
        name: 'F – Stoplight',
        desc: 'Green = safe + high production. Yellow = transitional. Red = danger. Intuitive traffic-light metaphor. Danger corner is vivid red.',
        colors: [
            [[228,232,228], [190,220,190], [50,180,60]],
            [[245,220,150], [215,200,140], [150,175,100]],
            [[235,50,40],   [220,80,50],   [255,180,0]],
        ],
        safe:    [[235,245,235], [195,230,195], [140,210,140], [80,185,80], [30,155,35]],
        drought: [[255,235,195], [255,200,120], [255,155,50],  [240,90,30], [215,40,15]],
    },
];

const container = document.getElementById('palettes');

for (const p of palettes) {
    const card = document.createElement('div');
    card.className = 'palette-card' + (p.current ? ' current' : '');

    // Build bivariate grid (row 0 = at-risk at TOP, row 2 = safe at BOTTOM)
    let gridHTML = '<div class="grid-container">';
    gridHTML += '<div class="axis-labels"><div class="y-axis">← Safe &nbsp;&nbsp;&nbsp;&nbsp; Drought Risk &nbsp;&nbsp;&nbsp;&nbsp; At-Risk →</div></div>';
    gridHTML += '<div><div class="bivariate-grid">';

    // Render top-to-bottom: at-risk (row 2) first, safe (row 0) last
    for (let risk = 2; risk >= 0; risk--) {
        for (let prod = 0; prod < 3; prod++) {
            const [r,g,b] = p.colors[risk][prod];
            const lum = 0.299*r + 0.587*g + 0.114*b;
            const label = risk === 2 && prod === 2 ? '★' : '';
            gridHTML += `<div class="cell${lum < 128 ? ' bright-text' : ''}" style="background:rgb(${r},${g},${b})">${label}</div>`;
        }
    }
    gridHTML += '</div>';
    gridHTML += '<div class="axis-labels"><div class="x-axis">Low → Production → High</div></div>';
    gridHTML += '</div></div>';

    // Build segmented ramps
    let rampHTML = '<div class="ramp-section"><h3>Segmented View</h3>';
    rampHTML += '<div class="ramp-row"><div class="label">Safe</div>';
    for (const [r,g,b] of p.safe) {
        rampHTML += `<div class="ramp-cell" style="background:rgb(${r},${g},${b})"></div>`;
    }
    rampHTML += '</div>';
    rampHTML += '<div class="ramp-row"><div class="label">Drought</div>';
    for (const [r,g,b] of p.drought) {
        rampHTML += `<div class="ramp-cell" style="background:rgb(${r},${g},${b})"></div>`;
    }
    rampHTML += '</div></div>';

    card.innerHTML = `
        <h2>${p.name}</h2>
        <div class="desc">${p.desc}</div>
        ${gridHTML}
        ${rampHTML}
    `;
    container.appendChild(card);
}
</script>
</body>
</html>
