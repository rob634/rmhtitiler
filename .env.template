# =============================================================================
# TiTiler-pgSTAC Environment Configuration Template
# =============================================================================
#
# This template contains ALL environment variables needed for deployment.
# Copy this file to .env and fill in your values for local development,
# or use these as reference for Azure App Service configuration.
#
# For new tenant deployments, see: QA_DEPLOYMENT.md
# =============================================================================

# =============================================================================
# POSTGRESQL DATABASE CONFIGURATION
# =============================================================================

# Authentication Mode: Choose one of:
#   - managed_identity  : Use Azure Managed Identity (production recommended)
#   - key_vault         : Retrieve password from Azure Key Vault
#   - password          : Use password from environment variable
POSTGRES_AUTH_MODE=managed_identity

# PostgreSQL Server Connection (required for all modes)
POSTGRES_HOST=your-server.postgres.database.azure.com
POSTGRES_DB=your_database_name
POSTGRES_USER=your_username
POSTGRES_PORT=5432

# Password Mode Only: Database password
# POSTGRES_PASSWORD=your_password

# Key Vault Mode Only: Azure Key Vault configuration
# KEY_VAULT_NAME=your-keyvault-name
# KEY_VAULT_SECRET_NAME=postgres-password

# =============================================================================
# AZURE STORAGE CONFIGURATION
# =============================================================================

# Enable OAuth authentication for Azure Blob Storage
USE_AZURE_AUTH=true

# Azure Storage Account name (without .blob.core.windows.net)
AZURE_STORAGE_ACCOUNT=your_storage_account

# Credential mode:
#   - false : Production - Use Managed Identity (default for Azure App Service)
#   - true  : Development - Use Azure CLI credentials (az login)
LOCAL_MODE=false

# =============================================================================
# GDAL OPTIMIZATION SETTINGS (Recommended)
# =============================================================================
# These settings optimize GDAL for reading Cloud Optimized GeoTIFFs (COGs)
# from Azure Blob Storage. Strongly recommended for production.

# Allowed file extensions for GDAL virtual filesystem
CPL_VSIL_CURL_ALLOWED_EXTENSIONS=.tif,.tiff

# Disable directory listing (improves performance)
GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR

# HTTP optimization for COG range requests
GDAL_HTTP_MERGE_CONSECUTIVE_RANGES=YES
GDAL_HTTP_MULTIPLEX=YES
GDAL_HTTP_VERSION=2

# Cache settings (512MB recommended)
VSI_CACHE=TRUE
VSI_CACHE_SIZE=536870912

# =============================================================================
# APPLICATION SETTINGS (Optional)
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR
# LOG_LEVEL=INFO

# =============================================================================
# AZURE RESOURCE NAMES REFERENCE
# =============================================================================
# These are NOT environment variables - they are Azure resource names you need
# to create/configure in your tenant. Document them here for reference.
#
# Resource Group:        ___________________________
# App Service Plan:      ___________________________
# App Service Name:      ___________________________
# Container Registry:    ___________________________
# Storage Account:       ___________________________
# PostgreSQL Server:     ___________________________
# User-Assigned MI:      ___________________________
# Key Vault (optional):  ___________________________
# =============================================================================
