# Local Development Environment Variables
# Copy this file to .env.local and fill in your values
#
# Most settings have defaults in docker-compose.yml, so this file is optional
# for basic local development.

# ============================================================================
# AZURE STORAGE AUTHENTICATION
# ============================================================================
# Your Azure Storage account name
# Default: rmhgeopipelines (set in docker-compose.yml)
AZURE_STORAGE_ACCOUNT=rmhgeopipelines

# Enable Azure authentication (uses Azure CLI credentials locally)
# Default: true
USE_AZURE_AUTH=true

# Local mode uses Azure CLI credentials instead of Managed Identity
# Default: true
LOCAL_MODE=true

# ============================================================================
# POSTGRESQL (pgSTAC)
# ============================================================================
# These are set in docker-compose.yml for local development.
# Override here if connecting to a different database.

# POSTGRES_HOST=database
# POSTGRES_PORT=5432
# POSTGRES_DB=postgis
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres

# Authentication mode: password, managed_identity, or key_vault
# Default: password (for local development)
# POSTGRES_AUTH_MODE=password

# ============================================================================
# PLANETARY COMPUTER
# ============================================================================
# Enable Planetary Computer integration for climate data
# Default: true
ENABLE_PLANETARY_COMPUTER=true

# ============================================================================
# GDAL PERFORMANCE TUNING
# ============================================================================
CPL_VSIL_CURL_CACHE_SIZE=128000000
GDAL_CACHEMAX=512
GDAL_HTTP_MULTIPLEX=YES
GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR

# ============================================================================
# EXAMPLE CONFIGURATIONS
# ============================================================================

# Configuration 1: Full local development with pgSTAC + Azure
# (Default - uses docker-compose PostgreSQL and Azure CLI credentials)
# USE_AZURE_AUTH=true
# LOCAL_MODE=true
# AZURE_STORAGE_ACCOUNT=rmhgeopipelines
# POSTGRES_AUTH_MODE=password

# Configuration 2: Local development without Azure (public data only)
# USE_AZURE_AUTH=false
# LOCAL_MODE=true
# ENABLE_PLANETARY_COMPUTER=true

# Configuration 3: Connect to remote Azure PostgreSQL (testing prod-like setup)
# POSTGRES_HOST=your-server.postgres.database.azure.com
# POSTGRES_PORT=5432
# POSTGRES_DB=your_db
# POSTGRES_USER=your_user
# POSTGRES_PASSWORD=your_password
# POSTGRES_AUTH_MODE=password

# ============================================================================
# HOW AUTHENTICATION WORKS
# ============================================================================
#
# LOCAL DEVELOPMENT:
#   1. Run 'az login' to authenticate with Azure CLI
#   2. DefaultAzureCredential uses your CLI credentials
#   3. OAuth tokens are generated for Azure Storage access
#   4. PostgreSQL uses password auth (simple, fast)
#
# PRODUCTION:
#   1. App Service has Managed Identity enabled
#   2. DefaultAzureCredential uses Managed Identity
#   3. OAuth tokens for storage, optionally MI tokens for PostgreSQL
#
# PLANETARY COMPUTER:
#   - Automatically fetches SAS tokens from PC's API
#   - Works without any configuration
#   - Provides access to CMIP6 climate data, gridMET, Daymet, etc.
