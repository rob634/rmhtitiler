# =============================================================================
# geotiler â€” Production Dependencies
# =============================================================================
# Installed ON TOP of the base image (ghcr.io/stac-utils/titiler-pgstac:1.9.0)
# which already provides: titiler-pgstac, titiler-core, rio-tiler, rasterio,
# fastapi, starlette, uvicorn, psycopg, pydantic, asyncpg, etc.
#
# This file is the SINGLE SOURCE OF TRUTH for dependencies.
# The Dockerfile uses: pip install -r requirements.txt
# =============================================================================

# --- Azure Authentication -------------------------------------------------
# OAuth tokens via Managed Identity for storage and PostgreSQL
azure-identity>=1.15.0
# Key Vault access for password retrieval (key_vault auth mode)
azure-keyvault-secrets>=4.7.0

# --- Xarray / Zarr --------------------------------------------------------
# Multidimensional data support (Zarr, NetCDF)
titiler.xarray>=0.18.0
# Azure Data Lake filesystem for fsspec (Zarr access via abfs://)
adlfs>=2024.4.1

# --- Configuration ---------------------------------------------------------
pydantic-settings>=2.0.0

# --- Monitoring & Observability --------------------------------------------
# Hardware metrics in /health endpoint
psutil>=5.9.0
# Application Insights integration (set APPLICATIONINSIGHTS_CONNECTION_STRING)
azure-monitor-opentelemetry>=1.6.0

# --- OGC Features + Vector Tiles (TiPG) -----------------------------------
# OGC API - Features and OGC API - Tiles for PostGIS tables
# https://github.com/developmentseed/tipg
tipg>=0.12.0

# --- STAC API --------------------------------------------------------------
# Catalog browsing and search via stac-fastapi-pgstac
stac-fastapi.pgstac>=4.0.0

# --- Admin Endpoint Authentication ----------------------------------------
# Azure AD JWT token validation for /admin/* endpoints
PyJWT>=2.8.0
cryptography>=41.0.0

# --- H3 Explorer (optional, gated by ENABLE_H3_DUCKDB) --------------------
duckdb>=1.0.0
